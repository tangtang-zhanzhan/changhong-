"use strict";function queRen(){var i=location.href,n=$.cookie("phone");n?($(".but").html(n.slice(0,5)),$(".tex").html("退出"),$(".nh").html(n.slice(0,5))):(alert("请先登录"),location.href="../html/denglu.html?"+i)}queRen();var lsnum,ls=JSON.parse(localStorage.getItem("shop"));function ra(){var l=0,e=0,i=JSON.parse(localStorage.getItem("shop"));$(".sp ul").html(""),i.forEach(function(i){var n='\n        <li class="'+i.id+'">\n            <h3>'+i.name+i.title+'</h3>\n            <div class="pcs">\n                单价<span>'+i.price+"</span>元   \n                <p>x<span>"+i.num+'</span></p>\n                <p class="a">删除</p>\n            </div>\n        </li>\n        ';$(".sp ul").append(n);var s=parseInt(i.num),t=parseInt(i.price)*s;l+=s,e+=t}),$(".sp").css("display","block"),$(".hj .xx").html("<p>"+l+"件商品</p>\n                    <p>总价: <b>￥</b><span>"+e+"</span></p>")}ls&&(lsnum=0,ls.forEach(function(i){var n=parseInt(i.num);lsnum+=n}),$(".list li:nth-child(8) span").html(lsnum)),$(".list li:nth-child(6)").mouseenter(function(){$(".list .tal1").css("display","block")}),$(".list li:nth-child(7)").mouseenter(function(){$(".list .gzh").css("display","block")}),$(".list li:nth-child(8)").mouseenter(function(){ls?ra():$(".list .gw").css("display","block")}),$(".list li:nth-child(6)").mouseleave(function(){$(".list .tal1").css("display","none")}),$(".list li:nth-child(7)").mouseleave(function(){$(".list .gzh").css("display","none")}),$(".list li:nth-child(8)").mouseleave(function(){$(".list .gw").css("display","none")}),$(".list li:nth-child(8) .sho").mouseenter(function(){$(".list li:nth-child(8) .sp").css("display","block")}),$(".list li:nth-child(8) .sp").mouseleave(function(){$(".list li:nth-child(8) .sp").css("display","none")}),$(".sou input").focus(function(){$(".in input").val(""),$(".in .lie").css("display","block"),$(".lie p").hover(function(){$(this).css("color","#f12020")},function(){$(this).css("color","#000")}),$(".lie p").click(function(){console.log($(this).attr("date-title"))})}),function(){var t=!0;$(".heat .lis").on("mouseenter","a",function(i){var n,s=$(i.target).text();t&&("电视"==s?(t=!1,$(".reCom").css("display","block"),$(".reCom ul").html(""),n="<li>热门推荐</li>",$(".reCom ul").append(n),$.ajax({type:"get",url:"../json/shopCHiQ.json",success:function(i){var n=i.CHiQ.watch.list.slice(0,4);n.forEach(function(i){var n="",s=$("<li date-id='"+i.id+'\' title="shopCHiQ.CHiQ.watch"></li>');n+='\n                        <a href="javascript:;">\n                        <img src="'+i.img[0]+'" alt="">\n                        </a>\n                        <div class="title">'+i.name+"</div>\n                        <p>￥<span>"+i.price+"</span></p>\n                        ",s.html(n),$(".reCom ul").append(s),$(".reCom").stop().animate({height:"200px"},1e3)}),t=!0}})):"空调"==s?(t=!1,$(".reCom").css("display","block"),$(".reCom ul").html(""),n="<li>热门推荐</li>",$(".reCom ul").append(n),$.ajax({type:"get",url:"../json/shopCHiQ.json",success:function(i){var n=i.CHiQ.air.list.slice(0,4);n.forEach(function(i){var n="",s=$("<li date-id='"+i.id+'\' title="shopCHiQ.CHiQ.air"></li>');n+='\n                        <a href="javascript:;">\n                        <img src="'+i.img[0]+'" alt="">\n                        </a>\n                        <div class="title">'+i.name+"</div>\n                        <p>￥<span>"+i.price+"</span></p>\n                        ",s.html(n),$(".reCom ul").append(s),$(".reCom").stop().animate({height:"200px"},1e3)}),t=!0}})):"冰箱"==s?(t=!1,$(".reCom").css("display","block"),$(".reCom ul").html(""),n="<li>热门推荐</li>",$(".reCom ul").append(n),$.ajax({type:"get",url:"../json/shopWash.json",success:function(i){var n=i.condWash.geCond.list.slice(0,4);n.forEach(function(i){var n="",s=$("<li date-id='"+i.id+'\' title="shopWash.condWash.geCond"></li>');n+='\n                        <a href="javascript:;">\n                        <img src="'+i.img[0]+'" alt="">\n                        </a>\n                        <div class="title">'+i.name+"</div>\n                        <p>￥<span>"+i.price+"</span></p>\n                        ",s.html(n),$(".reCom ul").append(s),$(".reCom").stop().animate({height:"200px"},1e3)}),t=!0}})):"洗衣机"==s?(t=!1,$(".reCom").css("display","block"),$(".reCom ul").html(""),n="<li>热门推荐</li>",$(".reCom ul").append(n),$.ajax({type:"get",url:"../json/shopWash.json",success:function(i){var n=i.condWash.xyjCond.list.slice(0,4);n.forEach(function(i){var n="",s=$("<li date-id='"+i.id+'\' title="shopWash.condWash.xyjCond"></li>');n+='\n                        <a href="javascript:;">\n                        <img src="'+i.img[0]+'" alt="">\n                        </a>\n                        <div class="title">'+i.name+"</div>\n                        <p>￥<span>"+i.price+"</span></p>\n                        ",s.html(n),$(".reCom ul").append(s),$(".reCom").stop().animate({height:"200px"},1e3)}),t=!0}})):"生活家电"==s?(t=!1,$(".reCom").css("display","block"),$(".reCom ul").html(""),n="<li>热门推荐</li>",$(".reCom ul").append(n),$.ajax({type:"get",url:"../json/shopWash.json",success:function(i){var n=i.condJd.guiCond.list.slice(0,4);n.forEach(function(i){var n="",s=$("<li date-id='"+i.id+'\' title="shopWash.condJd.guiCond"></li>');n+='\n                        <a href="javascript:;">\n                        <img src="'+i.img[0]+'" alt="">\n                        </a>\n                        <div class="title">'+i.name+"</div>\n                        <p>￥<span>"+i.price+"</span></p>\n                        ",s.html(n),$(".reCom ul").append(s),$(".reCom").stop().animate({height:"200px"},1e3)}),t=!0}})):"服务"==s&&(t=!1,$(".reCom").css("display","block"),$(".reCom ul").html(""),n="<li>服务支持</li>",$(".reCom ul").append(n),$.ajax({type:"get",url:"../json/shopWash.json",success:function(i){i.fwcond.img.forEach(function(i){var n="",s=$("<li></li>");n+='\n                        <a href="javascript:;">\n                        <img src="'+i+'" alt="">\n                        </a>\n                        ',s.html(n),$(".reCom ul").append(s),$(".reCom").stop().animate({height:"200px"},1e3)}),t=!0}})))}),$(".heat").on("mouseleave","a",function(){$(".reCom").stop().animate({height:0},1e3,function(){$(".reCom ul").html(""),t=!0})})}(),"登录"==$(".but").text()&&$(".but").click(function(){location.href="./denglu.html"}),"注册"==$(".tex").text()?$(".tex").click(function(){location.href="./zhuce.html"}):$(".tex").click(function(){$.cookie("phone","",{expires:7,path:"/"}),$(".but").html("登录"),$(".tex").html("注册"),$(".nh").html("你好请登录")}),$(document).on("click",function(i){var s,t,n=$(i.target);n.hasClass("a")&&(s=n.parent().parent().attr("class"),(t=JSON.parse(localStorage.getItem("shop"))).forEach(function(i,n){i.id==s&&t.splice(n,1)}),localStorage.setItem("shop",JSON.stringify(t)),ra())});